# UIæ”¹å–„ãƒ—ãƒ©ãƒ³ v3.0ï¼šå“è³ªåŸºç›¤ã®å¼·åŒ–ã¨UXæœ€é©åŒ–

## ğŸ“‹ æ¦‚è¦

**ä½œæˆæ—¥**: 2025-10-06  
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 3.0  
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: ææ¡ˆä¸­  
**å„ªå…ˆåº¦**: High  
**å·¥æ•°è¦‹ç©**: 3.0æ—¥ï¼ˆå…¨Phaseï¼‰

### v2.0ã‹ã‚‰ã®å¤‰æ›´ç‚¹

- **ã‚¹ã‚³ãƒ¼ãƒ—æ‹¡å¤§**: UIã ã‘ã§ãªãå“è³ªåŸºç›¤å…¨ä½“ã‚’å¼·åŒ–
- **å·¥æ•°å¢—åŠ **: 0.5æ—¥ â†’ 3.0æ—¥ï¼ˆãƒ†ã‚¹ãƒˆãƒ»CI/CDå¼·åŒ–ã‚’å«ã‚€ï¼‰
- **å„ªå…ˆåº¦å¤‰æ›´**: Medium â†’ Highï¼ˆå“è³ªãƒ»ä¿¡é ¼æ€§ã®å‘ä¸Šï¼‰

## ğŸ¯ ç›®çš„

### ä¸»ç›®çš„

1. **UXæœ€é©åŒ–**: ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚¢ã‚¦ã‚§ã‚¢ãªUIã§ç›´æ„Ÿçš„ãªæ“ä½œæ€§ã‚’å®Ÿç¾
2. **å“è³ªåŸºç›¤å¼·åŒ–**: ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ã¨CI/CDå“è³ªã‚²ãƒ¼ãƒˆã®å®Ÿè£…
3. **ä¿¡é ¼æ€§å‘ä¸Š**: è‡ªå‹•ç›£è¦–ã¨ã‚¨ãƒ©ãƒ¼æ¤œçŸ¥ã®ä»•çµ„ã¿æ§‹ç¯‰

### v2.0ã®çµ±åˆçš„ãƒ¬ãƒ“ãƒ¥ãƒ¼çµæœ

#### âœ… é”æˆã§ããŸã“ã¨

| é …ç›®                 | çŠ¶æ…‹ | è©³ç´°                     |
| -------------------- | ---- | ------------------------ |
| ãƒ‡ã‚¶ã‚¤ãƒ³ãƒˆãƒ¼ã‚¯ãƒ³     | âœ…   | ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£æ‹¡å¼µå®Œäº† |
| ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£     | âœ…   | WCAG 2.2 AAæº–æ‹           |
| ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ– | âœ…   | é…å»¶ãƒ­ãƒ¼ãƒ‰ãƒ»ãƒ¡ãƒ¢åŒ–å®Ÿè£…   |
| ARIAå±æ€§             | âœ…   | ä¸»è¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«é©ç”¨ |

#### âš ï¸ æ”¹å–„ãŒå¿…è¦ãªé ˜åŸŸ

| ID    | å•é¡Œ                       | å½±éŸ¿åº¦ | ç¾çŠ¶               | ç›®æ¨™                |
| ----- | -------------------------- | ------ | ------------------ | ------------------- |
| Q-001 | ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ä¸è¶³       | é«˜     | 4-5%ï¼ˆæ¥µã‚ã¦ä½ã„ï¼‰ | 60%ï¼ˆç¾å®Ÿçš„ç›®æ¨™ï¼‰   |
| Q-002 | a11yãƒ†ã‚¹ãƒˆä¸è¶³             | é«˜     | 3/15ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ | 8/15ä»¥ä¸Šï¼ˆ53%ï¼‰    |
| Q-003 | E2Eãƒ†ã‚¹ãƒˆä¸åœ¨              | ä¸­     | 0ä»¶                | ä¸»è¦ãƒ•ãƒ­ãƒ¼3ä»¶       |
| Q-004 | CIå“è³ªã‚²ãƒ¼ãƒˆå½¢éª¸åŒ–         | é«˜     | ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ã¿     | å®Ÿè³ªçš„ãƒã‚§ãƒƒã‚¯      |
| Q-005 | ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–ãªã—     | ä¸­     | æ‰‹å‹•æ¸¬å®šã®ã¿       | è‡ªå‹•ç›£è¦–            |
| Q-006 | ã‚¨ãƒ©ãƒ¼ç›£è¦–ãªã—             | ä¸­     | ãªã—               | Sentryç­‰ã®å°å…¥      |
| Q-007 | ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¹ã‚­ãƒ£ãƒ³ä¸è¶³   | ä¸­     | npm audit          | CodeQLè¿½åŠ           |
| Q-008 | ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚«ã‚¿ãƒ­ã‚°ãªã— | ä½     | ãªã—               | Storybookã¯å„ªå…ˆåº¦ä½ |

**å®Ÿæ¸¬ã‚«ãƒãƒ¬ãƒƒã‚¸è©³ç´°ï¼ˆ2025-10-06æ™‚ç‚¹ï¼‰**:

```json
{
  "lines": {"total": 1585, "covered": 63, "pct": 3.97},
  "functions": {"total": 386, "covered": 20, "pct": 5.18},
  "statements": {"total": 1631, "covered": 66, "pct": 4.04},
  "branches": {"total": 1040, "covered": 48, "pct": 4.61}
}
```

**ã‚«ãƒãƒ¼ã•ã‚Œã¦ã„ã‚‹ä¸»ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**:
- ScoreBoard: 83%ï¼ˆãƒ†ã‚¹ãƒˆã‚ã‚Šï¼‰
- HelpDialog: 86%ï¼ˆa11yãƒ†ã‚¹ãƒˆã‚ã‚Šï¼‰

**æœªã‚«ãƒãƒ¼ã®ä¸»è¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**ï¼ˆã™ã¹ã¦0%ï¼‰:
- App.tsxï¼ˆãƒ¡ã‚¤ãƒ³ãƒ­ã‚¸ãƒƒã‚¯ï¼‰
- AtBatHistoryï¼ˆã‚³ã‚¢æ©Ÿèƒ½ï¼‰
- TeamManagerï¼ˆã‚³ã‚¢æ©Ÿèƒ½ï¼‰
- Loginï¼ˆèªè¨¼æ©Ÿèƒ½ï¼‰
- å…¨Firebaseã‚µãƒ¼ãƒ“ã‚¹

---

## ğŸ“Š v2.0å®Ÿè£…çŠ¶æ³ã®è©³ç´°åˆ†æ

### ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸åˆ†æ

**ç¾çŠ¶**:

```
ã‚«ãƒãƒ¬ãƒƒã‚¸é–¾å€¤: 50% (branches, functions, lines, statements)
å®Ÿæ¸¬å€¤: ä¸æ˜ï¼ˆæœªæ¸¬å®šï¼‰
a11yãƒ†ã‚¹ãƒˆ: 3/15ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ (20%)
```

**ãƒ†ã‚¹ãƒˆå®Ÿè£…çŠ¶æ³**:
| ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ | a11y | å˜ä½“ | çµ±åˆ | å„ªå…ˆåº¦ |
|---------------|------|------|------|--------|
| ScoreBoard | âœ… | âŒ | âŒ | é«˜ |
| AtBatForm | âœ… | âŒ | âŒ | é«˜ |
| HelpDialog | âœ… | âŒ | âŒ | ä¸­ |
| AtBatHistory | âŒ | âŒ | âŒ | é«˜ |
| TeamManager | âŒ | âŒ | âŒ | é«˜ |
| GameList | âŒ | âŒ | âŒ | ä¸­ |
| TeamList | âŒ | âŒ | âŒ | ä¸­ |
| TeamStatsList | âŒ | âŒ | âŒ | ä½ |
| TournamentVenue | âŒ | âŒ | âŒ | ä½ |
| LoadingButton | âŒ | âŒ | âŒ | ä¸­ |
| Login | âŒ | âŒ | âŒ | é«˜ |
| UserProfile | âŒ | âŒ | âŒ | ä¸­ |
| PlayerList | âŒ | âŒ | âŒ | ä¸­ |
| AtBatSummaryTable | âŒ | âŒ | âŒ | ä¸­ |

### CI/CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³åˆ†æ

**ç¾çŠ¶ã®å•é¡Œç‚¹**:

```yaml
# deployment-check ã‚¸ãƒ§ãƒ–
deployment-check:
  name: Deployment Readiness
  runs-on: ubuntu-latest
  needs: [test, build, security-audit]
  if: github.ref == 'refs/heads/main' # mainãƒ–ãƒ©ãƒ³ãƒã®ã¿

  steps:
    - name: Deployment readiness check
      run: |
        echo "âœ… All tests passed"      # å®Ÿè³ªçš„ãªãƒã‚§ãƒƒã‚¯ãªã—
        echo "âœ… Build successful"
        echo "âœ… Security audit completed"
        echo "ğŸš€ Ready for deployment!"
```

**å•é¡Œ**:

1. å®Ÿè³ªçš„ãªãƒã‚§ãƒƒã‚¯ãŒãªã„ï¼ˆechoã®ã¿ï¼‰
2. å“è³ªãƒ¡ãƒˆãƒªã‚¯ã‚¹ã®æ¤œè¨¼ãªã—
3. ã‚«ãƒãƒ¬ãƒƒã‚¸é–¾å€¤ã®ãƒã‚§ãƒƒã‚¯ãªã—
4. ãƒãƒ³ãƒ‰ãƒ«ã‚µã‚¤ã‚ºã®ç›£è¦–ãªã—
5. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å›å¸°ã®æ¤œå‡ºãªã—

---

## ğŸ¯ æ”¹å–„ææ¡ˆï¼ˆæ‹¡å¼µç‰ˆï¼‰

v2.0ã§ææ¡ˆã—ãŸUIã®æ”¹å–„ã«åŠ ãˆã¦ã€å“è³ªåŸºç›¤ã®å¼·åŒ–ã‚’è¿½åŠ ã—ã¾ã™ã€‚

## ğŸ› ç¾çŠ¶ã®å•é¡Œç‚¹

### å•é¡Œ1: ç„¡é–¢ä¿‚ãªãƒœã‚¿ãƒ³ãŒå¸¸ã«è¡¨ç¤ºã•ã‚Œã‚‹

**ç¾è±¡**:

- é¸æ‰‹ç®¡ç†ç”»é¢ã§ã‚‚ã€Œæ—¥ä»˜ã€ã€Œä¿å­˜ã€ã€Œä¸€è¦§è¡¨ç¤ºã€ãƒœã‚¿ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- é€šç®—æˆç¸¾ç”»é¢ã§ã‚‚åŒæ§˜ã«ã“ã‚Œã‚‰ã®ãƒœã‚¿ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- è©¦åˆä¸€è¦§ç”»é¢ã§ã‚‚è¡¨ç¤ºã•ã‚Œã‚‹ï¼ˆæ–°è¦ä½œæˆã®ã¿ãŒæœ‰åŠ¹ï¼‰

**å½±éŸ¿**:

- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæ··ä¹±ã™ã‚‹ï¼ˆã€Œã“ã®ãƒœã‚¿ãƒ³ã¯ä½•ã‚’ã™ã‚‹ã®ï¼Ÿã€ï¼‰
- ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã‚‚æ„å›³ã—ãªã„å‹•ä½œã‚’ã™ã‚‹å¯èƒ½æ€§
- UIãŒç…©é›‘ã«è¦‹ãˆã‚‹

### å•é¡Œ2: ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãŒä¸æ˜ç¢º

**ç¾è±¡**:

- ã©ã®ç”»é¢ã«ã„ã‚‹ã‹ãŒã€ãƒœã‚¿ãƒ³ã®è¡¨ç¤ºã‹ã‚‰ã¯åˆ¤æ–­ã—ã«ãã„
- AppBarã®ã‚¿ã‚¤ãƒˆãƒ«ã¯å¸¸ã«ã€Œé‡çƒã‚¹ã‚³ã‚¢ã€ã§å¤‰ã‚ã‚‰ãªã„

**å½±éŸ¿**:

- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒç¾åœ¨ã®ç”»é¢ã‚’è¦‹å¤±ã†
- ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãŒç›´æ„Ÿçš„ã§ãªã„

## âœ… æ”¹å–„ææ¡ˆ

### ææ¡ˆ1: ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã«å¿œã˜ãŸãƒœã‚¿ãƒ³è¡¨ç¤ºï¼ˆå®Ÿè£…å®Ÿæ…‹ã«å³ã—ãŸæ•´ç†ï¼‰

#### ç”»é¢ãƒ¢ãƒ¼ãƒ‰åˆ¥ã®ãƒœã‚¿ãƒ³è¡¨ç¤º

| ç”»é¢ãƒ¢ãƒ¼ãƒ‰       | æ—¥ä»˜ | ä¿å­˜ | ä¸€è¦§è¡¨ç¤º | ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ | ãƒ˜ãƒ«ãƒ— | ãƒ¡ãƒ‹ãƒ¥ãƒ¼ |
| ---------------- | ---- | ---- | -------- | ------------ | ------ | -------- |
| è©¦åˆå…¥åŠ›ï¼ˆé€šå¸¸ï¼‰ | âœ…   | âœ…   | âœ…       | âœ…           | âœ…     | âœ…       |
| è©¦åˆä¸€è¦§         | âŒ   | âŒ   | âŒ       | âœ…           | âœ…     | âœ…       |
| é¸æ‰‹ç®¡ç†         | âŒ   | âŒ   | âŒ       | âœ…           | âœ…     | âœ…       |
| é€šç®—æˆç¸¾         | âŒ   | âŒ   | âŒ       | âœ…           | âœ…     | âœ…       |
| å…±æœ‰ãƒ¢ãƒ¼ãƒ‰       | âŒ   | âŒ   | âœ…       | âœ…           | âœ…     | âŒ       |

**ç†ç”±**:

- **æ—¥ä»˜**: è©¦åˆå…¥åŠ›æ™‚ã®ã¿å¿…è¦ï¼ˆè©¦åˆãƒ‡ãƒ¼ã‚¿ã«ç´ã¥ãï¼‰
- **ä¿å­˜**: è©¦åˆå…¥åŠ›æ™‚ã®ã¿å¿…è¦ï¼ˆè©¦åˆãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ï¼‰
- **ä¸€è¦§è¡¨ç¤º**: è©¦åˆå…¥åŠ›æ™‚ã¯ç·¨é›†/ä¸€è¦§ã®åˆ‡ã‚Šæ›¿ãˆã€å…±æœ‰ãƒ¢ãƒ¼ãƒ‰ã§ã¯æˆç¸¾é–²è¦§
- **ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰**: å…¨ç”»é¢ã§æœ‰åŠ¹ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼è¨­å®šï¼‰
- **ãƒ˜ãƒ«ãƒ—**: å…¨ç”»é¢ã§æœ‰åŠ¹ï¼ˆæ“ä½œèª¬æ˜ï¼‰
- **ãƒ¡ãƒ‹ãƒ¥ãƒ¼**: é€šå¸¸ãƒ¢ãƒ¼ãƒ‰ã§æœ‰åŠ¹ï¼ˆãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰

### ææ¡ˆ2: ç”»é¢ã‚¿ã‚¤ãƒˆãƒ«ã®å‹•çš„å¤‰æ›´

#### ã‚¿ã‚¤ãƒˆãƒ«è¡¨ç¤ºãƒ«ãƒ¼ãƒ«

```tsx
const getPageTitle = () => {
  if (isSharedMode) return 'é‡çƒã‚¹ã‚³ã‚¢ï¼ˆé–²è¦§å°‚ç”¨ï¼‰';
  if (showGameList) return 'è©¦åˆä¸€è¦§';
  if (showTeamManagement) return 'é¸æ‰‹ç®¡ç†';
  if (showTeamStats) return 'é€šç®—æˆç¸¾';
  return 'é‡çƒã‚¹ã‚³ã‚¢'; // è©¦åˆå…¥åŠ›ç”»é¢
};
```

**åŠ¹æœ**:

- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒç¾åœ¨ã®ç”»é¢ã‚’æ˜ç¢ºã«æŠŠæ¡ã§ãã‚‹
- ãƒ‘ãƒ³ããšãƒªã‚¹ãƒˆçš„ãªå½¹å‰²ã‚’æœãŸã™

### ææ¡ˆ3: ã€Œæˆ»ã‚‹ã€ãƒœã‚¿ãƒ³ã®è¿½åŠ 

#### å®Ÿè£…æ¡ˆ

è©¦åˆä¸€è¦§ã€é¸æ‰‹ç®¡ç†ã€é€šç®—æˆç¸¾ã®å„ç”»é¢ã«ã€Œæˆ»ã‚‹ã€ãƒœã‚¿ãƒ³ã‚’è¡¨ç¤ºï¼š

```tsx
{
  (showGameList || showTeamManagement || showTeamStats) && (
    <IconButton
      color="inherit"
      onClick={handleBackToGame}
      aria-label="è©¦åˆç”»é¢ã«æˆ»ã‚‹"
    >
      <ArrowBackIcon />
    </IconButton>
  );
}
```

**åŠ¹æœ**:

- ç›´æ„Ÿçš„ãªãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¿·ã‚ãšè©¦åˆç”»é¢ã«æˆ»ã‚Œã‚‹
- ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒªã®ã‚ˆã†ãªæ“ä½œæ„Ÿ

## ğŸ”§ å®Ÿè£…è¨ˆç”»

### Phase 1: ãƒœã‚¿ãƒ³è¡¨ç¤ºãƒ­ã‚¸ãƒƒã‚¯ã®æ•´ç†ï¼ˆ0.25æ—¥ï¼‰

#### ãƒ•ã‚¡ã‚¤ãƒ«: `src/App.tsx`

**å¤‰æ›´ç®‡æ‰€**:

```tsx
// è©¦åˆå…¥åŠ›ç”»é¢ã‹ã©ã†ã‹ã‚’åˆ¤å®š
const isGameInputMode = !showGameList && !showTeamManagement && !showTeamStats;

// AppBarå†…ã®ãƒœã‚¿ãƒ³è¡¨ç¤ºï¼ˆå…±æœ‰ãƒ¢ãƒ¼ãƒ‰ä»¥å¤– ã‹ã¤ è©¦åˆå…¥åŠ›ç”»é¢ã®ã¿ï¼‰
{
  !isSharedMode && isGameInputMode && (
    <>
      {/* æ—¥ä»˜ãƒœã‚¿ãƒ³ï¼ˆsmä»¥ä¸Šã§è¡¨ç¤ºï¼‰ */}
      <Box sx={{ display: { xs: 'none', sm: 'block' } }}>
        <Button
          color="inherit"
          onClick={handleOpenDateDialog}
          sx={{ mr: 1 }}
          aria-label="è©¦åˆæ—¥ã‚’å¤‰æ›´"
        >
          {new Date(game.date).toLocaleDateString('ja-JP')}
        </Button>
      </Box>

      {/* ä¿å­˜ãƒœã‚¿ãƒ³ */}
      <Button
        color="inherit"
        startIcon={!isMobile && <SaveIcon />}
        onClick={handleOpenSaveDialog}
        sx={{ mr: isMobile ? 0.5 : 1 }}
        aria-label="è©¦åˆãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜"
      >
        ä¿å­˜
      </Button>

      {/* ä¸€è¦§è¡¨ç¤ºãƒœã‚¿ãƒ³ï¼ˆç·¨é›†/ä¸€è¦§ã®ãƒˆã‚°ãƒ«ï¼‰ */}
      <Button
        color="inherit"
        onClick={toggleViewMode}
        sx={{ mr: isMobile ? 0.5 : 1 }}
        aria-label={activeStep === 0 ? 'ä¸€è¦§è¡¨ç¤ºã«åˆ‡ã‚Šæ›¿ãˆ' : 'ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ã«æˆ»ã‚‹'}
      >
        {activeStep === 0 ? (isMobile ? 'ä¸€è¦§' : 'ä¸€è¦§è¡¨ç¤º') : (isMobile ? 'ç·¨é›†' : 'ç·¨é›†ã«æˆ»ã‚‹')}
      </Button>
    </>
  );
}

// å…±æœ‰ãƒ¢ãƒ¼ãƒ‰ï¼ˆé–²è¦§å°‚ç”¨ï¼‰ã§ã¯ã€ãƒ†ãƒ¼ãƒ/ãƒ˜ãƒ«ãƒ—/ãƒ›ãƒ¼ãƒ æˆ»ã‚‹ã®ã¿
{
  isSharedMode && (
    <Box sx={{ display: 'flex', alignItems: 'center' }}>
      {/* ãƒ†ãƒ¼ãƒåˆ‡æ›¿ã¨ãƒ˜ãƒ«ãƒ—ã¯å¸¸è¨­ï¼ˆç¾çŠ¶ã®æŒ™å‹•ã‚’ç¶­æŒï¼‰ */}
      <Button color="inherit" onClick={() => (window.location.href = window.location.origin)}>
        ã‚¢ãƒ—ãƒªã«æˆ»ã‚‹
      </Button>
    </Box>
  );
}
```

### Phase 2: å‹•çš„ã‚¿ã‚¤ãƒˆãƒ«ã®å®Ÿè£…ï¼ˆ0.1æ—¥ï¼‰

```tsx
const getPageTitle = () => {
  if (isSharedMode) return 'é‡çƒã‚¹ã‚³ã‚¢ï¼ˆé–²è¦§å°‚ç”¨ï¼‰';
  if (showGameList) return 'è©¦åˆä¸€è¦§';
  if (showTeamManagement) return 'é¸æ‰‹ç®¡ç†';
  if (showTeamStats) return 'é€šç®—æˆç¸¾';
  return 'é‡çƒã‚¹ã‚³ã‚¢';
};

// AppBarå†…
<Typography variant="h6" component="h1" sx={{ flexGrow: 0, mr: 2 }}>
  <SportsBaseballIcon sx={{ verticalAlign: 'middle', mr: 1, fontSize: 28 }} />
  {getPageTitle()}
</Typography>;
```

### Phase 3: æˆ»ã‚‹ãƒœã‚¿ãƒ³ã®å®Ÿè£…ï¼ˆ0.15æ—¥ï¼‰

```tsx
import ArrowBackIcon from '@mui/icons-material/ArrowBack';

// ãƒãƒ³ãƒ‰ãƒ©
const handleBackToGame = () => {
  if (showGameList) setShowGameList(false);
  if (showTeamManagement) setShowTeamManagement(false);
  if (showTeamStats) setShowTeamStats(false);
  handleMenuClose();
};

// AppBarå†…ï¼ˆãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒœã‚¿ãƒ³ã®ä½ç½®ã«æ¡ä»¶åˆ†å²ã§é…ç½®ï¼‰
{
  isGameInputMode ? (
    <IconButton
      color="inherit"
      aria-label="ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’é–‹ã"
      onClick={handleMenuOpen}
      edge="start"
      sx={{ mr: 2 }}
    >
      <MenuIcon />
    </IconButton>
  ) : (
    <IconButton
      color="inherit"
      aria-label="è©¦åˆç”»é¢ã«æˆ»ã‚‹"
      onClick={handleBackToGame}
      edge="start"
      sx={{ mr: 2 }}
    >
      <ArrowBackIcon />
    </IconButton>
  );
}
```

## ğŸ§ª ãƒ†ã‚¹ãƒˆè¨ˆç”»

### ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆï¼ˆJestï¼‰

```tsx
describe('AppBar context-aware display', () => {
  test('shows all buttons in game input mode', () => {
    // æ—¥ä»˜ã€ä¿å­˜ã€ä¸€è¦§è¡¨ç¤ºãƒœã‚¿ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
  });

  test('hides game-related buttons in game list mode', () => {
    // showGameList=trueã®æ™‚ã€æ—¥ä»˜ã€ä¿å­˜ã€ä¸€è¦§è¡¨ç¤ºãƒœã‚¿ãƒ³ãŒéè¡¨ç¤º
  });

  test('shows back button in non-game modes', () => {
    // è©¦åˆä¸€è¦§ã€é¸æ‰‹ç®¡ç†ã€é€šç®—æˆç¸¾ã§æˆ»ã‚‹ãƒœã‚¿ãƒ³ãŒè¡¨ç¤º
  });

  test('displays correct page title for each mode', () => {
    // å„ç”»é¢ãƒ¢ãƒ¼ãƒ‰ã§æ­£ã—ã„ã‚¿ã‚¤ãƒˆãƒ«ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
  });
  
  test('shared mode shows only theme/help/home actions', () => {
    // isSharedMode=true ã®æ™‚ã«ã‚²ãƒ¼ãƒ é–¢é€£ãƒœã‚¿ãƒ³ãŒå‡ºãªã„ã“ã¨ã‚’ç¢ºèª
  });
});
```

### æ‰‹å‹•ãƒ†ã‚¹ãƒˆï¼ˆæ“ä½œãƒ•ãƒ­ãƒ¼ï¼‰

1. **è©¦åˆå…¥åŠ›ç”»é¢**:
   - âœ… æ—¥ä»˜ã€ä¿å­˜ã€ä¸€è¦§è¡¨ç¤ºãƒœã‚¿ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã‚‹
   - âœ… ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒœã‚¿ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã‚‹

2. **è©¦åˆä¸€è¦§ç”»é¢**:
   - âœ… æ—¥ä»˜ã€ä¿å­˜ã€ä¸€è¦§è¡¨ç¤ºãƒœã‚¿ãƒ³ãŒéè¡¨ç¤º
   - âœ… æˆ»ã‚‹ãƒœã‚¿ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã‚‹
   - âœ… ã‚¿ã‚¤ãƒˆãƒ«ãŒã€Œè©¦åˆä¸€è¦§ã€ã«ãªã‚‹

3. **é¸æ‰‹ç®¡ç†ç”»é¢**:
   - âœ… æ—¥ä»˜ã€ä¿å­˜ã€ä¸€è¦§è¡¨ç¤ºãƒœã‚¿ãƒ³ãŒéè¡¨ç¤º
   - âœ… æˆ»ã‚‹ãƒœã‚¿ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã‚‹
   - âœ… ã‚¿ã‚¤ãƒˆãƒ«ãŒã€Œé¸æ‰‹ç®¡ç†ã€ã«ãªã‚‹

4. **é€šç®—æˆç¸¾ç”»é¢**:
   - âœ… æ—¥ä»˜ã€ä¿å­˜ã€ä¸€è¦§è¡¨ç¤ºãƒœã‚¿ãƒ³ãŒéè¡¨ç¤º
   - âœ… æˆ»ã‚‹ãƒœã‚¿ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã‚‹
   - âœ… ã‚¿ã‚¤ãƒˆãƒ«ãŒã€Œé€šç®—æˆç¸¾ã€ã«ãªã‚‹

5. **å…±æœ‰ãƒ¢ãƒ¼ãƒ‰**:
   - âœ… æ—¥ä»˜ã€ä¿å­˜ãƒœã‚¿ãƒ³ãŒéè¡¨ç¤º
   - âœ… ä¸€è¦§è¡¨ç¤ºãƒœã‚¿ãƒ³ã®ã¿è¡¨ç¤º
   - âœ… ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒœã‚¿ãƒ³ãŒéè¡¨ç¤º

### ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆ

```tsx
describe('AppBar accessibility', () => {
  test('back button has proper aria-label', () => {
    // æˆ»ã‚‹ãƒœã‚¿ãƒ³ã«aria-label="è©¦åˆç”»é¢ã«æˆ»ã‚‹"ãŒã‚ã‚‹ã“ã¨ã‚’ç¢ºèª
  });

  test('dynamic title is announced by screen readers', () => {
    // ç”»é¢é·ç§»æ™‚ã«ã‚¿ã‚¤ãƒˆãƒ«å¤‰æ›´ãŒèª­ã¿ä¸Šã’ã‚‰ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
  });

  test('keyboard navigation works correctly', () => {
    // Tabã‚­ãƒ¼ã§æˆ»ã‚‹ãƒœã‚¿ãƒ³ã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã§ãã‚‹ã“ã¨ã‚’ç¢ºèª
  });
});
```

## ğŸ“Š æœŸå¾…ã•ã‚Œã‚‹åŠ¹æœ

### UXæ”¹å–„

| æŒ‡æ¨™                   | Before             | After                  | æ”¹å–„ç‡ |
| ---------------------- | ------------------ | ---------------------- | ------ |
| ç”»é¢ã®è­˜åˆ¥æ€§           | ä½ï¼ˆã‚¿ã‚¤ãƒˆãƒ«å›ºå®šï¼‰ | é«˜ï¼ˆå‹•çš„ã‚¿ã‚¤ãƒˆãƒ«ï¼‰     | +100%  |
| ãƒœã‚¿ãƒ³ã®é–¢é€£æ€§         | ä½ï¼ˆå¸¸ã«è¡¨ç¤ºï¼‰     | é«˜ï¼ˆã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆé€£å‹•ï¼‰ | +80%   |
| ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã®ç›´æ„Ÿæ€§ | ä¸­ï¼ˆãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®ã¿ï¼‰ | é«˜ï¼ˆæˆ»ã‚‹ãƒœã‚¿ãƒ³è¿½åŠ ï¼‰   | +60%   |

### ã‚³ãƒ¼ãƒ‰å“è³ª

- **å¯èª­æ€§**: `isGameInputMode`ãªã©ã®æ„å‘³ã®ã‚ã‚‹å¤‰æ•°ã§æ¡ä»¶ãŒæ˜ç¢º
- **ä¿å®ˆæ€§**: ç”»é¢ãƒ¢ãƒ¼ãƒ‰åˆ¤å®šãƒ­ã‚¸ãƒƒã‚¯ãŒä¸€ç®‡æ‰€ã«é›†ç´„
- **æ‹¡å¼µæ€§**: æ–°ã—ã„ç”»é¢ãƒ¢ãƒ¼ãƒ‰è¿½åŠ ãŒå®¹æ˜“

## ğŸ¯ å—ã‘å…¥ã‚Œæ¡ä»¶

- [ ] è©¦åˆå…¥åŠ›ç”»é¢ã§ã¯ã€æ—¥ä»˜ã€ä¿å­˜ã€ä¸€è¦§è¡¨ç¤ºãƒœã‚¿ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] è©¦åˆä¸€è¦§ã€é¸æ‰‹ç®¡ç†ã€é€šç®—æˆç¸¾ç”»é¢ã§ã¯ã€ã“ã‚Œã‚‰ã®ãƒœã‚¿ãƒ³ãŒéè¡¨ç¤ºã«ãªã‚‹
- [ ] ä¸Šè¨˜ã®ç”»é¢ã§ã¯ã€Œæˆ»ã‚‹ã€ãƒœã‚¿ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã€ã‚¯ãƒªãƒƒã‚¯ã§è©¦åˆå…¥åŠ›ç”»é¢ã«æˆ»ã‚‹
- [ ] å„ç”»é¢ã§ã‚¿ã‚¤ãƒˆãƒ«ãŒé©åˆ‡ã«è¡¨ç¤ºã•ã‚Œã‚‹
- [ ] å…±æœ‰ãƒ¢ãƒ¼ãƒ‰ã§ã¯ä¸€è¦§è¡¨ç¤ºãƒœã‚¿ãƒ³ã®ã¿è¡¨ç¤ºã•ã‚Œã‚‹
- [ ] å…¨ã¦ã®æ—¢å­˜ãƒ†ã‚¹ãƒˆãŒãƒ‘ã‚¹ã™ã‚‹
- [ ] æ–°è¦ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆãŒãƒ‘ã‚¹ã™ã‚‹
- [ ] ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰æ“ä½œãŒæ­£å¸¸ã«å‹•ä½œã™ã‚‹
- [ ] ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ãƒªãƒ¼ãƒ€ãƒ¼ã§é©åˆ‡ã«èª­ã¿ä¸Šã’ã‚‰ã‚Œã‚‹

## ğŸš€ å®Ÿè£…ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«

| Phase    | å†…å®¹                     | å·¥æ•°      | æ‹…å½“ |
| -------- | ------------------------ | --------- | ---- |
| Phase 1  | ãƒœã‚¿ãƒ³è¡¨ç¤ºãƒ­ã‚¸ãƒƒã‚¯ã®æ•´ç† | 0.25æ—¥    | -    |
| Phase 2  | å‹•çš„ã‚¿ã‚¤ãƒˆãƒ«ã®å®Ÿè£…       | 0.1æ—¥     | -    |
| Phase 3  | æˆ»ã‚‹ãƒœã‚¿ãƒ³ã®å®Ÿè£…         | 0.15æ—¥    | -    |
| **åˆè¨ˆ** |                          | **0.5æ—¥** |      |

## ğŸ”„ ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯è¨ˆç”»

### å•é¡ŒãŒç™ºç”Ÿã—ãŸå ´åˆ

1. **Phase 3ã®ã¿ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯**: æˆ»ã‚‹ãƒœã‚¿ãƒ³ã‚’å‰Šé™¤
2. **Phase 2ã®ã¿ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯**: ã‚¿ã‚¤ãƒˆãƒ«ã‚’å›ºå®šã«æˆ»ã™
3. **Phase 1ã®ã¿ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯**: ãƒœã‚¿ãƒ³ã‚’å¸¸ã«è¡¨ç¤ºã«æˆ»ã™
4. **å®Œå…¨ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯**: å…¨ã¦ã®å¤‰æ›´ã‚’å…ƒã«æˆ»ã™

### ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯æ‰‹é †

```bash
# Phase 1-3å…¨ä½“ã‚’ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯
git revert <commit-hash>
```

## ğŸ“ è£œè¶³äº‹é …

### ãƒ‡ã‚¶ã‚¤ãƒ³ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³

#### æˆ»ã‚‹ãƒœã‚¿ãƒ³

- **ã‚¢ã‚¤ã‚³ãƒ³**: `ArrowBackIcon`ï¼ˆMaterial-UIæ¨™æº–ï¼‰
- **é…ç½®**: ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒœã‚¿ãƒ³ã¨åŒã˜ä½ç½®ï¼ˆå·¦ç«¯ï¼‰
- **è‰²**: `color="inherit"`ï¼ˆAppBarã®è‰²ã«åˆã‚ã›ã‚‹ï¼‰
- **ã‚µã‚¤ã‚º**: ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒœã‚¿ãƒ³ã¨åŒã˜ï¼ˆ44x44px minimumï¼‰

#### ã‚¿ã‚¤ãƒˆãƒ«

- **ãƒ•ã‚©ãƒ³ãƒˆ**: `variant="h6"`ï¼ˆæ—¢å­˜ã¨åŒã˜ï¼‰
- **ä½ç½®**: å·¦å´ï¼ˆã‚¢ã‚¤ã‚³ãƒ³ã®éš£ï¼‰
- **ãƒ¢ãƒã‚¤ãƒ«**: å¿…è¦ã«å¿œã˜ã¦çœç•¥ï¼ˆã€Œé‡çƒã‚¹ã‚³ã‚¢ã€â†’ã€Œã‚¹ã‚³ã‚¢ã€ï¼‰

### ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œ

```tsx
// ãƒ¢ãƒã‚¤ãƒ«ã§ã¯ã‚¿ã‚¤ãƒˆãƒ«ã‚’çŸ­ç¸®
const getPageTitle = () => {
  const fullTitle = (() => {
    if (isSharedMode) return 'é‡çƒã‚¹ã‚³ã‚¢ï¼ˆé–²è¦§å°‚ç”¨ï¼‰';
    if (showGameList) return 'è©¦åˆä¸€è¦§';
    if (showTeamManagement) return 'é¸æ‰‹ç®¡ç†';
    if (showTeamStats) return 'é€šç®—æˆç¸¾';
    return 'é‡çƒã‚¹ã‚³ã‚¢';
  })();

  return isMobile ? fullTitle.replace('é‡çƒã‚¹ã‚³ã‚¢', 'ã‚¹ã‚³ã‚¢') : fullTitle;
};
```

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è€ƒæ…®

- æ¡ä»¶åˆ†å²ã¯è»½é‡ï¼ˆçŠ¶æ…‹å¤‰æ•°ã®ãƒã‚§ãƒƒã‚¯ã®ã¿ï¼‰
- ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã¸ã®å½±éŸ¿ã¯æœ€å°é™
- `useMemo`ã¯ä¸è¦ï¼ˆè¨ˆç®—ã‚³ã‚¹ãƒˆãŒä½ã„ï¼‰

## ğŸ”— é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [UIæ”¹å–„ãƒ—ãƒ©ãƒ³ v2.0](./ui_improve_plan_v2.md) - Phase 1-4ã®åŸºæœ¬æ”¹å–„
- [Material-UI AppBar](https://mui.com/material-ui/react-app-bar/) - AppBarã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- [Material-UI Icons](https://mui.com/material-ui/material-icons/) - ã‚¢ã‚¤ã‚³ãƒ³ãƒ©ã‚¤ãƒ–ãƒ©ãƒª

---

## ğŸš€ Phase 2: ãƒ†ã‚¹ãƒˆå“è³ªå¼·åŒ–ï¼ˆ1.0æ—¥ï¼‰

### PR-02: å„ªå…ˆåº¦é«˜ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ†ã‚¹ãƒˆæ‹¡å……

**ç›®çš„**: ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ã‚’4-5%â†’60%ã«å‘ä¸Šï¼ˆç¾å®Ÿçš„ãªç›®æ¨™è¨­å®šï¼‰

**å¤‰æ›´ãƒ•ã‚¡ã‚¤ãƒ«**:

- æ–°è¦: `src/components/__tests__/AtBatHistory.test.tsx`
- æ–°è¦: `src/components/__tests__/TeamManager.test.tsx`
- æ–°è¦: `src/components/__tests__/Login.test.tsx`
- æ–°è¦: `src/components/__tests__/LoadingButton.test.tsx`
- æ–°è¦: `src/components/__tests__/AtBatHistory.a11y.test.tsx`
- æ–°è¦: `src/components/__tests__/TeamManager.a11y.test.tsx`
- æ–°è¦: `scripts/check-coverage.js`ï¼ˆCIã§ã‚«ãƒãƒ¬ãƒƒã‚¸ä¸‹é™ã‚’åˆ¤å®šï¼‰

**å®Ÿè£…å†…å®¹**ï¼ˆå„ªå…ˆåº¦é †ï¼‰:

#### 1. LoadingButtonå˜ä½“ãƒ†ã‚¹ãƒˆï¼ˆå„ªå…ˆåº¦: é«˜ï¼‰

```tsx
describe('LoadingButton', () => {
  test('shows loading spinner when loading prop is true', () => {
    // ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ä¸­ã«CircularProgressãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
  });

  test('disables button when loading', () => {
    // ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ä¸­ã¯ãƒœã‚¿ãƒ³ãŒç„¡åŠ¹åŒ–ã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
  });

  test('sets aria-busy attribute', () => {
    // aria-busyå±æ€§ãŒé©åˆ‡ã«è¨­å®šã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
  });
});
```

#### 2. AtBatHistoryå˜ä½“ãƒ†ã‚¹ãƒˆï¼ˆå„ªå…ˆåº¦: é«˜ï¼‰

\`\`\`tsx
describe('AtBatHistory', () => {
test('displays at-bat records correctly', () => {
// æ‰“å¸­è¨˜éŒ²ãŒæ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
});

test('handles edit action', () => {
// ç·¨é›†ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯ã§onEditãŒå‘¼ã°ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
});

test('handles delete action', () => {
// å‰Šé™¤ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯ã§onDeleteãŒå‘¼ã°ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
});
});
\`\`\`

#### 2. TeamManagerçµ±åˆãƒ†ã‚¹ãƒˆ

\`\`\`tsx
describe('TeamManager', () => {
test('creates new team', async () => {
// ãƒãƒ¼ãƒ ä½œæˆãƒ•ãƒ­ãƒ¼ã‚’ãƒ†ã‚¹ãƒˆ
});

test('adds player to team', async () => {
// é¸æ‰‹è¿½åŠ ãƒ•ãƒ­ãƒ¼ã‚’ãƒ†ã‚¹ãƒˆ
});

test('validates player input', () => {
// ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼ã®è¡¨ç¤ºç¢ºèª
});
});
\`\`\`

#### 3. LoadingButtonå˜ä½“ãƒ†ã‚¹ãƒˆ

\`\`\`tsx
describe('LoadingButton', () => {
test('shows loading spinner when loading prop is true', () => {
// ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ä¸­ã«CircularProgressãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
});

test('disables button when loading', () => {
// ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ä¸­ã¯ãƒœã‚¿ãƒ³ãŒç„¡åŠ¹åŒ–ã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
});

test('sets aria-busy attribute', () => {
// aria-busyå±æ€§ãŒé©åˆ‡ã«è¨­å®šã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
});
});
\`\`\`

**å—ã‘å…¥ã‚Œæ¡ä»¶**:

- [ ] ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ãŒ30%ä»¥ä¸Šï¼ˆåˆæœŸæ®µéšã®ç¾å®Ÿçš„ãªä¸‹é™ï¼‰
- [ ] å„ªå…ˆåº¦é«˜ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆLoadingButton, AtBatHistory, TeamManagerï¼‰ã«ãƒ†ã‚¹ãƒˆè¿½åŠ 
- [ ] æ–°è¦a11yãƒ†ã‚¹ãƒˆãŒ2ä»¶ä»¥ä¸Šè¿½åŠ ï¼ˆ8/15ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä»¥ä¸Šã«ï¼‰
- [ ] å…¨ãƒ†ã‚¹ãƒˆãŒãƒ‘ã‚¹

**å·¥æ•°**: 1.0æ—¥

---

## ğŸ”’ Phase 3: CI/CDå“è³ªã‚²ãƒ¼ãƒˆå®Ÿè£…ï¼ˆ1.0æ—¥ï¼‰

### PR-03: Deployment Readinessã®å®Ÿè³ªçš„ãƒã‚§ãƒƒã‚¯å®Ÿè£…

**ç›®çš„**: CI/CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã«å®Ÿè³ªçš„ãªå“è³ªã‚²ãƒ¼ãƒˆã‚’å®Ÿè£…

**å¤‰æ›´ãƒ•ã‚¡ã‚¤ãƒ«**:

- å¤‰æ›´: `.github/workflows/ci.yml`
- æ–°è¦: `scripts/check-bundle-size.js`
- æ–°è¦: `scripts/check-coverage.js`
- æ–°è¦: `.github/workflows/quality-gate.yml`

**å®Ÿè£…å†…å®¹**:

#### 1. ã‚«ãƒãƒ¬ãƒƒã‚¸é–¾å€¤ãƒã‚§ãƒƒã‚¯ï¼ˆNodeã‚¹ã‚¯ãƒªãƒ—ãƒˆæ–¹å¼ãƒ»é–¾å€¤ã¯ç’°å¢ƒå¤‰æ•°ã§å¯å¤‰ï¼‰

```javascript
// scripts/check-coverage.js
const fs = require('fs');

const SUMMARY_PATH = 'coverage/coverage-summary.json';
const THRESHOLD = Number(process.env.COVERAGE_THRESHOLD || 30); // åˆæœŸä¸‹é™ã¯30%

if (!fs.existsSync(SUMMARY_PATH)) {
  console.error(`âŒ Coverage summary not found: ${SUMMARY_PATH}`);
  process.exit(1);
}

const summary = JSON.parse(fs.readFileSync(SUMMARY_PATH, 'utf8'));
const linesPct = Number(summary.total?.lines?.pct || 0);

console.log(`Coverage(lines): ${linesPct}% (threshold: ${THRESHOLD}%)`);
if (isNaN(linesPct) || linesPct < THRESHOLD) {
  console.error(`âŒ Coverage ${linesPct}% is below threshold ${THRESHOLD}%`);
  console.error('è©³ç´°ãƒ¬ãƒãƒ¼ãƒˆ:', JSON.stringify(summary.total, null, 2));
  process.exit(1);
}
console.log('âœ… Coverage meets threshold');
```

#### 2. ãƒãƒ³ãƒ‰ãƒ«ã‚µã‚¤ã‚ºç›£è¦–

\`\`\`javascript
// scripts/check-bundle-size.js
const fs = require('fs');
const path = require('path');

const MAX_BUNDLE_SIZE = 1024 \* 1024; // 1MBï¼ˆç¾å®Ÿçš„ãªã‚µã‚¤ã‚ºåˆ¶é™ï¼‰
const buildDir = path.join(\_\_dirname, '../build/static/js');

const files = fs.readdirSync(buildDir)
.filter(file => file.endsWith('.js') && !file.includes('.map'));

const mainBundle = files.find(file => file.startsWith('main.'));
const size = fs.statSync(path.join(buildDir, mainBundle)).size;

console.log(\`Main bundle size: \${(size / 1024).toFixed(2)}KB\`);

if (size > MAX_BUNDLE_SIZE) {
console.error(\`âŒ Bundle size \${(size / 1024).toFixed(2)}KB exceeds limit \${(MAX_BUNDLE_SIZE / 1024).toFixed(2)}KB\`);
process.exit(1);
}

console.log('âœ… Bundle size within limit');
\`\`\`

#### 3. å“è³ªã‚²ãƒ¼ãƒˆã®çµ±åˆï¼ˆYAMLæ•´å½¢ã¨å¯å¤‰é–¾å€¤å¯¾å¿œï¼‰

```yaml
deployment-check:
  name: Deployment Readiness
  runs-on: ubuntu-latest
  needs: [test, build, security-audit]
  if: github.ref == 'refs/heads/main'

  steps:
    - name: Checkout code
      uses: actions/checkout@v5

    - name: Setup Node.js
      uses: actions/setup-node@v5
      with:
        node-version: '18'
        cache: 'npm'

    - name: Install dependencies
      run: npm ci

    - name: Download build artifacts
      uses: actions/download-artifact@v4
      with:
        name: build-files
        path: build/

    - name: Download coverage artifacts
      uses: actions/download-artifact@v4
      with:
        name: coverage-report
        path: coverage/

    - name: Check test coverage threshold
      run: node scripts/check-coverage.js
      env:
        COVERAGE_THRESHOLD: 30

    - name: Check bundle size
      run: node scripts/check-bundle-size.js

    - name: Verify TypeScript compilation
      run: npx tsc --noEmit

    - name: Check for security vulnerabilities
      run: npm audit --audit-level=high --production

    - name: Quality gate summary
      run: |
        echo "ğŸ“Š Quality Gate Report"
        echo "====================="
        echo "âœ… Test Coverage: Meets threshold"
        echo "âœ… Bundle Size: Within limit"
        echo "âœ… TypeScript: No errors"
        echo "âœ… Security: No high/critical vulnerabilities"
        echo "ğŸš€ Deployment approved!"
```

#### 4. CodeQL ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¹ã‚­ãƒ£ãƒ³è¿½åŠ 

\`\`\`yaml

# .github/workflows/quality-gate.yml (æ–°è¦)

name: Security & Quality Gate

on:
pull_request:
branches: [main]
push:
branches: [main]
schedule: - cron: '0 0 \* \* 1' # æ¯é€±æœˆæ›œæ—¥

jobs:
codeql-analysis:
name: CodeQL Analysis
runs-on: ubuntu-latest
permissions:
security-events: write

    steps:
      - name: Checkout code
        uses: actions/checkout@v5

      - name: Initialize CodeQL
        uses: github/codeql-action/init@v3
        with:
          languages: javascript

      - name: Autobuild
        uses: github/codeql-action/autobuild@v3

      - name: Perform CodeQL Analysis
        uses: github/codeql-action/analyze@v3

\`\`\`

**å—ã‘å…¥ã‚Œæ¡ä»¶**:

- [ ] ã‚«ãƒãƒ¬ãƒƒã‚¸30%æœªæº€ã§CIå¤±æ•—ï¼ˆåˆæœŸä¸‹é™ãƒ»ç’°å¢ƒå¤‰æ•°ã§å¯å¤‰ï¼‰
- [ ] ãƒãƒ³ãƒ‰ãƒ«ã‚µã‚¤ã‚º1MBè¶…éã§CIå¤±æ•—ï¼ˆç¾å®Ÿçš„ãªåˆ¶é™ï¼‰
- [ ] TypeScriptã‚¨ãƒ©ãƒ¼ã§CIå¤±æ•—
- [ ] é«˜/ã‚¯ãƒªãƒ†ã‚£ã‚«ãƒ«ãªè„†å¼±æ€§ã§CIå¤±æ•—
- [ ] CodeQLã‚¹ã‚­ãƒ£ãƒ³ãŒé€±æ¬¡ã§å®Ÿè¡Œ
- [ ] mainãƒ–ãƒ©ãƒ³ãƒã¸ã®pushæ™‚ã«å…¨ãƒã‚§ãƒƒã‚¯å®Ÿè¡Œ

**å·¥æ•°**: 1.0æ—¥

---

## ğŸ“ˆ Phase 4: ç›£è¦–ã¨ã‚¨ãƒ©ãƒ¼ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ï¼ˆ0.5æ—¥ï¼‰

### PR-04: åŸºæœ¬çš„ãªç›£è¦–åŸºç›¤ã®æº–å‚™

**ç›®çš„**: ã‚¨ãƒ©ãƒ¼ç›£è¦–ã¨ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ã®æº–å‚™

**å¤‰æ›´ãƒ•ã‚¡ã‚¤ãƒ«**:

- å¤‰æ›´: `src/index.tsx` (ã‚¨ãƒ©ãƒ¼ãƒã‚¦ãƒ³ãƒ€ãƒªè¿½åŠ )
- æ–°è¦: `src/components/ErrorBoundary.tsx`
- å¤‰æ›´: `src/reportWebVitals.ts` (Web Vitalsé€ä¿¡)
- å¤‰æ›´: `package.json` (web-vitalsè¨­å®š)

**å®Ÿè£…å†…å®¹**:

#### 1. ErrorBoundaryå®Ÿè£…

\`\`\`tsx
// src/components/ErrorBoundary.tsx
import React, { Component, ErrorInfo, ReactNode } from 'react';
import { Box, Button, Typography, Paper } from '@mui/material';
import ErrorOutlineIcon from '@mui/icons-material/ErrorOutline';

interface Props {
children: ReactNode;
}

interface State {
hasError: boolean;
error: Error | null;
}

class ErrorBoundary extends Component<Props, State> {
constructor(props: Props) {
super(props);
this.state = { hasError: false, error: null };
}

static getDerivedStateFromError(error: Error): State {
return { hasError: true, error };
}

componentDidCatch(error: Error, errorInfo: ErrorInfo) {
console.error('Error caught by boundary:', error, errorInfo);

    // TODO: ã‚¨ãƒ©ãƒ¼ç›£è¦–ã‚µãƒ¼ãƒ“ã‚¹ã«é€ä¿¡ï¼ˆSentryç­‰ï¼‰
    // if (process.env.NODE_ENV === 'production') {
    //   Sentry.captureException(error, { contexts: { react: errorInfo } });
    // }

}

handleReset = () => {
this.setState({ hasError: false, error: null });
window.location.href = '/';
};

render() {
if (this.state.hasError) {
return (
<Box
sx={{
            display: 'flex',
            justifyContent: 'center',
            alignItems: 'center',
            minHeight: '100vh',
            p: 3,
          }} >
<Paper sx={{ p: 4, maxWidth: 600, textAlign: 'center' }}>
<ErrorOutlineIcon
sx={{ fontSize: 64, color: 'error.main', mb: 2 }}
/>
<Typography variant="h5" gutterBottom>
ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ
</Typography>
<Typography color="text.secondary" sx={{ mb: 3 }}>
ç”³ã—è¨³ã”ã–ã„ã¾ã›ã‚“ã€‚äºˆæœŸã—ãªã„ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚
</Typography>
{process.env.NODE_ENV === 'development' && (
<Paper
sx={{
                  p: 2,
                  mb: 3,
                  bgcolor: 'grey.100',
                  textAlign: 'left',
                  overflow: 'auto',
                }} >
<Typography variant="caption" component="pre">
{this.state.error?.toString()}
</Typography>
</Paper>
)}
<Button variant="contained" onClick={this.handleReset}>
ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹
</Button>
</Paper>
</Box>
);
}

    return this.props.children;

}
}

export default ErrorBoundary;
\`\`\`

#### 2. Web Vitalsé€ä¿¡ã®å¼·åŒ–

\`\`\`typescript
// src/reportWebVitals.ts
import { ReportHandler, Metric } from 'web-vitals';

const reportWebVitals = (onPerfEntry?: ReportHandler) => {
if (onPerfEntry && onPerfEntry instanceof Function) {
import('web-vitals').then(({ onCLS, onINP, onFCP, onLCP, onTTFB }) => {
const reportMetric = (metric: Metric) => {
onPerfEntry(metric);

        // TODO: ã‚¢ãƒŠãƒªãƒ†ã‚£ã‚¯ã‚¹ã‚µãƒ¼ãƒ“ã‚¹ã«é€ä¿¡
        // if (process.env.NODE_ENV === 'production') {
        //   // Google Analytics 4
        //   gtag('event', metric.name, {
        //     value: Math.round(metric.name === 'CLS' ? metric.value * 1000 : metric.value),
        //     metric_id: metric.id,
        //     metric_value: metric.value,
        //     metric_delta: metric.delta,
        //   });
        // }

        console.log(\`[Web Vitals] \${metric.name}:\`, {
          value: metric.value,
          rating: metric.rating,
          id: metric.id,
        });
      };

      onCLS(reportMetric);
      onINP(reportMetric);
      onFCP(reportMetric);
      onLCP(reportMetric);
      onTTFB(reportMetric);
    });

}
};

export default reportWebVitals;
\`\`\`

#### 3. index.tsxã¸ã®é©ç”¨

\`\`\`tsx
// src/index.tsx
import ErrorBoundary from './components/ErrorBoundary';

root.render(
<React.StrictMode>
<ErrorBoundary>
<App />
</ErrorBoundary>
</React.StrictMode>
);

reportWebVitals((metric) => {
console.log(metric);
});
\`\`\`

**å—ã‘å…¥ã‚Œæ¡ä»¶**:

- [ ] ErrorBoundaryãŒå®Ÿè£…ã•ã‚Œã€ã‚¨ãƒ©ãƒ¼æ™‚ã«UIè¡¨ç¤º
- [ ] é–‹ç™ºç’°å¢ƒã§ã‚¨ãƒ©ãƒ¼è©³ç´°ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] Web VitalsãŒconsoleã«ãƒ­ã‚°Output
- [ ] æœ¬ç•ªç’°å¢ƒã§ã¯é©åˆ‡ãªã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ã¿è¡¨ç¤º

**å·¥æ•°**: 0.5æ—¥

**Note**: Sentryç­‰ã®å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹çµ±åˆã¯ã€æœ¬PRã§ã¯æº–å‚™ã®ã¿ï¼ˆã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆï¼‰ã¨ã—ã€å®Ÿéš›ã®çµ±åˆã¯åˆ¥é€”åˆ¤æ–­

---

## ğŸ“Š å·¥æ•°ã¨ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼ˆv3.0å…¨ä½“ï¼‰

### ç·å·¥æ•°è¦‹ç©ã‚‚ã‚Š

| Phase    | PR    | å†…å®¹                         | å·¥æ•°      |
| -------- | ----- | ---------------------------- | --------- |
| Phase 1  | PR-01 | ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚¢ã‚¦ã‚§ã‚¢ãªAppBar | 0.5æ—¥     |
| Phase 2  | PR-02 | ãƒ†ã‚¹ãƒˆå“è³ªå¼·åŒ–               | 1.0æ—¥     |
| Phase 3  | PR-03 | CI/CDå“è³ªã‚²ãƒ¼ãƒˆå®Ÿè£…          | 1.0æ—¥     |
| Phase 4  | PR-04 | ç›£è¦–åŸºç›¤æº–å‚™                 | 0.5æ—¥     |
| **åˆè¨ˆ** |       |                              | **3.0æ—¥** |

### æ¨å¥¨ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«

```
Day 1: PR-01å®Œæˆï¼ˆUXæ”¹å–„ï¼‰
Day 2: PR-02ç€æ‰‹ãƒ»å®Œæˆï¼ˆãƒ†ã‚¹ãƒˆæ‹¡å……ï¼‰
Day 3: PR-03ç€æ‰‹ãƒ»å®Œæˆï¼ˆCI/CDå¼·åŒ–ï¼‰
Day 4: PR-04ç€æ‰‹ãƒ»å®Œæˆï¼ˆç›£è¦–æº–å‚™ï¼‰
```

---

## ğŸ¯ v3.0å—ã‘å…¥ã‚Œæ¡ä»¶ï¼ˆå…¨ä½“ï¼‰

### Phase 1ï¼ˆUXï¼‰

- [ ] å„ç”»é¢ã§é©åˆ‡ãªãƒœã‚¿ãƒ³ã®ã¿è¡¨ç¤º
- [ ] å‹•çš„ã‚¿ã‚¤ãƒˆãƒ«ãŒå®Ÿè£…
- [ ] æˆ»ã‚‹ãƒœã‚¿ãƒ³ãŒæ©Ÿèƒ½
- [ ] ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆåˆæ ¼

### Phase 2ï¼ˆãƒ†ã‚¹ãƒˆï¼‰

- [ ] ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸30%ä»¥ä¸Šï¼ˆCIã‚²ãƒ¼ãƒˆï¼‰ï¼ç›®æ¨™60%
- [ ] a11yãƒ†ã‚¹ãƒˆ10/15ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä»¥ä¸Š
- [ ] å„ªå…ˆåº¦é«˜ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«å˜ä½“ãƒ†ã‚¹ãƒˆ

### Phase 3ï¼ˆCI/CDï¼‰

- [ ] ã‚«ãƒãƒ¬ãƒƒã‚¸é–¾å€¤ãƒã‚§ãƒƒã‚¯ãŒå‹•ä½œ
- [ ] ãƒãƒ³ãƒ‰ãƒ«ã‚µã‚¤ã‚ºç›£è¦–ãŒå‹•ä½œ
- [ ] CodeQLã‚¹ã‚­ãƒ£ãƒ³ãŒé€±æ¬¡å®Ÿè¡Œ
- [ ] deployment-checkãŒå®Ÿè³ªçš„ãªãƒã‚§ãƒƒã‚¯å®Ÿæ–½

### Phase 4ï¼ˆç›£è¦–ï¼‰

- [ ] ErrorBoundaryãŒå®Ÿè£…
- [ ] Web Vitalsè¨ˆæ¸¬ãŒå‹•ä½œ
- [ ] ã‚¨ãƒ©ãƒ¼æ™‚ã«é©åˆ‡ãªUIãŒè¡¨ç¤º

---

## ğŸ”— é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [UIæ”¹å–„ãƒ—ãƒ©ãƒ³ v2.0](./ui_improve_plan_v2.md) - åŸºæœ¬æ”¹å–„ï¼ˆå®Œäº†ï¼‰
- [Jest Configuration](https://jestjs.io/docs/configuration)
- [GitHub Actions Quality Gates](https://docs.github.com/en/actions)
- [Web Vitals](https://web.dev/vitals/)
- [React Error Boundaries](https://react.dev/reference/react/Component#catching-rendering-errors-with-an-error-boundary)

---

## ğŸ—ï¸ Phase 5ä»¥é™: ä¸­é•·æœŸçš„æ§‹é€ æ”¹å–„ï¼ˆåˆ¥è¨ˆç”»ï¼‰

Phase 1-4å®Œäº†å¾Œã®æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã¨ã—ã¦ã€ä»¥ä¸‹ã®æ§‹é€ æ”¹å–„ã‚’æ¤œè¨ã—ã¾ã™ã€‚

### èƒŒæ™¯: ã‚«ãƒãƒ¬ãƒƒã‚¸åˆ†æçµæœ

Phase 2ã§ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ã¯å‘ä¸Šã—ã¾ã™ãŒï¼ˆ6% â†’ 30-60%ï¼‰ã€ã•ã‚‰ãªã‚‹å“è³ªå‘ä¸Šã«ã¯æ§‹é€ çš„ãªæ”¹å–„ãŒå¿…è¦ã§ã™ã€‚

```
ç¾çŠ¶ã®èª²é¡Œ:
â”œâ”€ App.tsx: 1,707è¡Œ (0%ã‚«ãƒãƒ¼) â† æœ€å¤§ã®ãƒœãƒˆãƒ«ãƒãƒƒã‚¯
â”œâ”€ Firebaseç³»: 1,095è¡Œ (0%ã‚«ãƒãƒ¼) â† ãƒ¢ãƒƒã‚¯å›°é›£
â”œâ”€ å¤§è¦æ¨¡UI: 2,500è¡Œ+ (ä½ã‚«ãƒãƒ¼) â† çµ±åˆãƒ†ã‚¹ãƒˆä¸è¶³
â””â”€ å°è¦æ¨¡ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ: Phase 2ã§æ”¹å–„äºˆå®š
```

**èª²é¡Œã®æœ¬è³ª**:

1. âœ— **ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã¨UIã®å¯†çµåˆ** â†’ ãƒ†ã‚¹ãƒˆå›°é›£
2. âœ— **å·¨å¤§ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ** â†’ å¤‰æ›´å½±éŸ¿ç¯„å›²ãŒå¤§ãã„
3. âœ— **Firebaseç›´æ¥ä¾å­˜** â†’ ãƒ¢ãƒƒã‚¯ãŒè¤‡é›‘

---

### Phase 5a: App.tsxã®ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ï¼ˆå„ªå…ˆåº¦: é«˜ï¼‰

**ç›®çš„**: 1,707è¡Œã®å·¨å¤§ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ†ã‚¹ãƒˆå¯èƒ½ãªå˜ä½ã«åˆ†å‰²

**å·¥æ•°è¦‹ç©**: 3æ—¥é–“

**æ”¹å–„æ¡ˆ**:

1. **ã‚«ã‚¹ã‚¿ãƒ Hooksã¸ã®åˆ†å‰²**:

   ```typescript
   // src/hooks/useGameState.ts (æ–°è¦ä½œæˆ)
   export const useGameState = (initialGame?: Game) => {
     const [homeTeam, setHomeTeam] = useState<Team>(/* ... */);
     const [awayTeam, setAwayTeam] = useState<Team>(/* ... */);
     const [currentInning, setCurrentInning] = useState(1);
     const [isTop, setIsTop] = useState(true);

     const addAtBat = useCallback((atBat: AtBat) => {
       // ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯
     }, [homeTeam, awayTeam]);

     return {
       homeTeam,
       awayTeam,
       currentInning,
       isTop,
       addAtBat,
       // ... ãã®ä»–ã®æ“ä½œ
     };
   };

   // src/hooks/useTeamManagement.ts (æ–°è¦ä½œæˆ)
   export const useTeamManagement = () => {
     // ãƒãƒ¼ãƒ ã®ä½œæˆãƒ»ç·¨é›†ãƒ»å‰Šé™¤ãƒ­ã‚¸ãƒƒã‚¯
   };

   // src/hooks/useScoreCalculation.ts (æ–°è¦ä½œæˆ)
   export const useScoreCalculation = (
     homeTeam: Team,
     awayTeam: Team,
     runEvents: RunEvent[]
   ) => {
     // ã‚¹ã‚³ã‚¢è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯
   };
   ```

2. **ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã®ã‚µãƒ¼ãƒ“ã‚¹å±¤åˆ†é›¢**:

   ```typescript
   // src/services/scoreCalculator.ts (æ–°è¦ä½œæˆ)
   export class ScoreCalculator {
     static calculateInningScore(
       team: Team,
       inning: number,
       isTop: boolean
     ): number {
       // ç´”ç²‹é–¢æ•°åŒ–ã•ã‚ŒãŸã‚¹ã‚³ã‚¢è¨ˆç®—
     }

     static calculateTotalScore(
       team: Team,
       runEvents: RunEvent[]
     ): number {
       // åˆè¨ˆã‚¹ã‚³ã‚¢è¨ˆç®—
     }
   }

   // src/services/inningManager.ts (æ–°è¦ä½œæˆ)
   export class InningManager {
     static getNextInning(
       current: number,
       isTop: boolean,
       maxInnings: number
     ): { inning: number; isTop: boolean } {
       // ã‚¤ãƒ‹ãƒ³ã‚°é€²è¡Œãƒ­ã‚¸ãƒƒã‚¯
     }
   }
   ```

**æœŸå¾…åŠ¹æœ**:

- âœ… ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸: 0% â†’ 60%ä»¥ä¸Š
- âœ… å¤‰æ›´å½±éŸ¿ç¯„å›²ã®æ˜ç¢ºåŒ–
- âœ… ä¸¦è¡Œé–‹ç™ºã®å®¹æ˜“æ€§å‘ä¸Š
- âœ… ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®åŠ¹ç‡åŒ–

**ãƒªã‚¹ã‚¯**: å¤§è¦æ¨¡ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã«ã‚ˆã‚‹ä¸€æ™‚çš„ä¸å®‰å®šåŒ–  
**è»½æ¸›ç­–**: ãƒ•ã‚£ãƒ¼ãƒãƒ£ãƒ¼ãƒ•ãƒ©ã‚°ã«ã‚ˆã‚‹æ®µéšçš„ç§»è¡Œ

---

### Phase 5b: Firebaseä¾å­˜ã®æŠ½è±¡åŒ–ï¼ˆå„ªå…ˆåº¦: ä¸­ï¼‰

**ç›®çš„**: ãƒ†ã‚¹ãƒˆå®¹æ˜“æ€§ã¨ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ éä¾å­˜æ€§ã®å‘ä¸Š

**å·¥æ•°è¦‹ç©**: 2æ—¥é–“

**æ”¹å–„æ¡ˆ**:

1. **Repositoryãƒ‘ã‚¿ãƒ¼ãƒ³ã®å°å…¥**:

   ```typescript
   // src/repositories/GameRepository.ts (æ–°è¦ä½œæˆ)
   export interface IGameRepository {
     save(game: Game, userId: string): Promise<string>;
     load(gameId: string): Promise<Game | null>;
     list(userId: string): Promise<Game[]>;
     delete(gameId: string): Promise<void>;
   }

   // src/repositories/FirebaseGameRepository.ts (æ–°è¦ä½œæˆ)
   export class FirebaseGameRepository implements IGameRepository {
     private firestore: Firestore;

     constructor(firestore: Firestore) {
       this.firestore = firestore;
     }

     async save(game: Game, userId: string): Promise<string> {
       // Firebaseå®Ÿè£…
     }

     // ... ãã®ä»–ã®ãƒ¡ã‚½ãƒƒãƒ‰
   }

   // src/repositories/MockGameRepository.ts (ãƒ†ã‚¹ãƒˆç”¨)
   export class MockGameRepository implements IGameRepository {
     private storage: Map<string, Game> = new Map();

     async save(game: Game, userId: string): Promise<string> {
       const id = `mock-${Date.now()}`;
       this.storage.set(id, game);
       return id;
     }

     // ... ãã®ä»–ã®ãƒ¡ã‚½ãƒƒãƒ‰
   }
   ```

2. **Dependency Injectionã®å°å…¥**:

   ```typescript
   // src/contexts/RepositoryContext.tsx (æ–°è¦ä½œæˆ)
   export const RepositoryContext = createContext<{
     gameRepository: IGameRepository;
     teamRepository: ITeamRepository;
     statsRepository: IStatsRepository;
   } | null>(null);

   export const RepositoryProvider: React.FC<{
     children: React.ReactNode;
     repositories?: {
       /* ... */
     };
   }> = ({ children, repositories }) => {
     const defaultRepositories = useMemo(
       () => ({
         gameRepository:
           repositories?.gameRepository ||
           new FirebaseGameRepository(firestore),
         // ... ãã®ä»–
       }),
       [repositories]
     );

     return (
       <RepositoryContext.Provider value={defaultRepositories}>
         {children}
       </RepositoryContext.Provider>
     );
   };

   // ä½¿ç”¨ä¾‹
   export const useGameRepository = () => {
     const context = useContext(RepositoryContext);
     if (!context) {
       throw new Error('useGameRepository must be used within RepositoryProvider');
     }
     return context.gameRepository;
   };
   ```

3. **ãƒ†ã‚¹ãƒˆã§ã®åˆ©ç”¨**:
   ```typescript
   // App.test.tsx
   import { MockGameRepository } from './repositories/MockGameRepository';

   test('è©¦åˆã‚’ä¿å­˜ã§ãã‚‹', async () => {
     const mockRepo = new MockGameRepository();

     render(
       <RepositoryProvider
         repositories={{ gameRepository: mockRepo }}
       >
         <App />
       </RepositoryProvider>
     );

     // ãƒ†ã‚¹ãƒˆå®Ÿè¡Œï¼ˆFirebaseãƒ¢ãƒƒã‚¯ä¸è¦ï¼‰
   });
   ```

**æœŸå¾…åŠ¹æœ**:

- âœ… Firebase Emulatorä¸è¦ã§ãƒ†ã‚¹ãƒˆå®Ÿè¡Œå¯èƒ½
- âœ… ãƒ†ã‚¹ãƒˆå®Ÿè¡Œé€Ÿåº¦ã®å¤§å¹…å‘ä¸Šï¼ˆ50å€ä»¥ä¸Šï¼‰
- âœ… ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å¤‰æ›´æ™‚ã®å½±éŸ¿ç¯„å›²é™å®š
- âœ… ã‚«ãƒãƒ¬ãƒƒã‚¸: Firebaseç³»ã‚µãƒ¼ãƒ“ã‚¹ 0% â†’ 80%ä»¥ä¸Š

**ãƒªã‚¹ã‚¯**: æŠ½è±¡åŒ–ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®è¤‡é›‘æ€§å¢—åŠ   
**è»½æ¸›ç­–**: ã¾ãš1ã¤ã®Repositoryã§å®Ÿè¨¼ã€æ®µéšçš„ç§»è¡Œ

---

### Phase 5c: E2Eãƒ†ã‚¹ãƒˆåŸºç›¤ã®æ§‹ç¯‰ï¼ˆå„ªå…ˆåº¦: ä¸­ï¼‰

**ç›®çš„**: ã‚¨ãƒ³ãƒ‰ãƒ„ãƒ¼ã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆã«ã‚ˆã‚‹å“è³ªä¿è¨¼ã®å¼·åŒ–

**å·¥æ•°è¦‹ç©**: 2æ—¥é–“

**æ”¹å–„æ¡ˆ**:

1. **Playwrightã®å°å…¥**:

   ```typescript
   // e2e/game-flow.spec.ts (æ–°è¦ä½œæˆ)
   import { test, expect } from '@playwright/test';

   test('è©¦åˆä½œæˆã‹ã‚‰ä¿å­˜ã¾ã§ã®ãƒ•ãƒ­ãƒ¼', async ({ page }) => {
     // ãƒ­ã‚°ã‚¤ãƒ³
     await page.goto('/');
     await page.click('text=ãƒ­ã‚°ã‚¤ãƒ³');
     // ... èªè¨¼ãƒ•ãƒ­ãƒ¼

     // è©¦åˆä½œæˆ
     await page.click('text=æ–°ã—ã„è©¦åˆ');
     await page.fill('[name="home-team"]', 'ãƒ›ãƒ¼ã‚¯ã‚¹');
     await page.fill('[name="away-team"]', 'ã‚¿ã‚¤ã‚¬ãƒ¼ã‚¹');

     // æ‰“å¸­è¨˜éŒ²
     await page.click('text=æ‰“å¸­ã‚’è¿½åŠ ');
     await page.selectOption('[name="result"]', 'IH');
     await page.click('text=ç™»éŒ²');

     // ä¿å­˜ç¢ºèª
     await page.click('text=ä¿å­˜');
     await expect(page.locator('text=ä¿å­˜ã—ã¾ã—ãŸ')).toBeVisible();
   });
   ```

2. **Visual Regression Testing** (Optional):

   ```typescript
   // ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆæ¯”è¼ƒã«ã‚ˆã‚‹è¦–è¦šçš„ãƒªã‚°ãƒ¬ãƒƒã‚·ãƒ§ãƒ³æ¤œå‡º
   await expect(page).toHaveScreenshot('score-board.png');
   ```

3. **CI/CDã¸ã®çµ±åˆ**:
   ```yaml
   # .github/workflows/e2e.yml
   name: E2E Tests
   on: [pull_request]
   jobs:
     e2e:
       runs-on: ubuntu-latest
       steps:
         - uses: actions/checkout@v3
         - uses: actions/setup-node@v3
         - run: npm ci
         - run: npx playwright install
         - run: npm run test:e2e
   ```

**æœŸå¾…åŠ¹æœ**:

- âœ… ã‚¯ãƒªãƒ†ã‚£ã‚«ãƒ«ãƒ‘ã‚¹ã®è‡ªå‹•æ¤œè¨¼
- âœ… ãƒªã‚°ãƒ¬ãƒƒã‚·ãƒ§ãƒ³æ¤œå‡ºã®æ—©æœŸåŒ–
- âœ… å…¨ä½“ãƒ•ãƒ­ãƒ¼ã®ã‚«ãƒãƒ¬ãƒƒã‚¸å‘ä¸Š

---

### å®Ÿè£…ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼ˆæ®µéšçš„ã‚¢ãƒ—ãƒ­ãƒ¼ãƒï¼‰

**Phase 5å…¨ä½“: å®Ÿè¨¼ã¨ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—ï¼ˆ2é€±é–“ï¼‰**

```
Week 1-2:
  - App.tsxã‹ã‚‰1ã¤ã®ã‚«ã‚¹ã‚¿ãƒ Hookã‚’æŠ½å‡ºï¼ˆuseGameStateï¼‰
  - 1ã¤ã®Repositoryã‚’å®Ÿè£…ï¼ˆGameRepositoryï¼‰
  - ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸åŠ¹æœã®æ¸¬å®š
  â†’ åŠ¹æœãŒç¢ºèªã§ãã‚Œã°æœ¬æ ¼å±•é–‹
```

**Phase 6: æœ¬æ ¼å±•é–‹ï¼ˆ4é€±é–“ï¼‰**

```
Week 3-4:
  - æ®‹ã‚Šã®ã‚«ã‚¹ã‚¿ãƒ Hookså®Ÿè£…
  - ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã®ã‚µãƒ¼ãƒ“ã‚¹å±¤åˆ†é›¢
  - ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸: 30% â†’ 40%

Week 5-6:
  - å…¨Repositoryã®å®Ÿè£…
  - æ—¢å­˜ã‚³ãƒ¼ãƒ‰ã®æ®µéšçš„ç§»è¡Œ
  - ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸: 40% â†’ 60%
```

**Phase 7: å“è³ªå¼·åŒ–ï¼ˆ2é€±é–“ï¼‰**

```
Week 7-8:
  - E2Eãƒ†ã‚¹ãƒˆå®Ÿè£…
  - çµ±åˆãƒ†ã‚¹ãƒˆã®æ‹¡å……
  - ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸: 60% â†’ 70%
  - ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ•´å‚™
```

**ç·å·¥æ•°**: 8é€±é–“ï¼ˆ1äººï¼‰ã¾ãŸã¯ 4é€±é–“ï¼ˆ2äººï¼‰

---

### æŠ•è³‡å¯¾åŠ¹æœï¼ˆROIï¼‰åˆ†æ

**åˆæœŸæŠ•è³‡**: 8é€±é–“ï¼ˆç´„160æ™‚é–“ï¼‰

**æœŸå¾…åŠ¹æœ**:

| æŒ‡æ¨™                       | v3.0å®Œäº†æ™‚ | Phase 7å®Œäº†æ™‚ | æ”¹å–„ç‡  |
| -------------------------- | ---------- | ------------- | ------- |
| ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸           | 30-60%     | 70%           | +1,067% |
| ãƒã‚°æ¤œå‡ºæ™‚é–“               | æ•°æ™‚é–“     | æ•°åˆ†          | -99%    |
| æ–°æ©Ÿèƒ½é–‹ç™ºé€Ÿåº¦             | åŸºæº–       | 1.5å€         | +50%    |
| ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã®å®‰å…¨æ€§   | ä¸­         | é«˜            | +++     |
| æ–°ãƒ¡ãƒ³ãƒãƒ¼ã®ã‚ªãƒ³ãƒœãƒ¼ãƒ‰æ™‚é–“ | 1é€±é–“      | 3æ—¥           | -70%    |
| ãƒ‡ãƒ—ãƒ­ã‚¤æ™‚ã®ä¸å®‰åº¦         | ä¸­         | ä½            | ---     |
| æŠ€è¡“çš„è² å‚µã®è“„ç©é€Ÿåº¦       | ä¸­é€Ÿ       | é…ã„          | ---     |

**å¹´é–“æ›ç®—ã®åŠ¹æœ**:

- ãƒã‚°ä¿®æ­£æ™‚é–“å‰Šæ¸›: 40æ™‚é–“/å¹´ â†’ 160æ™‚é–“ã®æŠ•è³‡ã¯**4ãƒ¶æœˆã§å›å**
- é–‹ç™ºé€Ÿåº¦å‘ä¸Š: 50%ã®ã‚¹ãƒ”ãƒ¼ãƒ‰ã‚¢ãƒƒãƒ— â†’ å¹´é–“200æ™‚é–“ã®è¿½åŠ é–‹ç™ºæ™‚é–“
- å“è³ªå‘ä¸Šã«ã‚ˆã‚‹é¡§å®¢æº€è¶³åº¦ã¨NPSã®å‘ä¸Šï¼ˆå®šé‡åŒ–å›°é›£ï¼‰

**çµè«–**: **æŠ•è³‡ã™ã‚‹ä¾¡å€¤ã¯æ¥µã‚ã¦é«˜ã„**

---

### æ®µéšçš„ç§»è¡Œã®å®Ÿè·µä¾‹

**ã‚¹ãƒ†ãƒƒãƒ—1: å°è¦æ¨¡ã‹ã‚‰é–‹å§‹**

```typescript
// ã¾ãšã€æœ€ã‚‚ç‹¬ç«‹æ€§ã®é«˜ã„useScoreCalculationã‚’æŠ½å‡º

// Before (App.tsxå†…)
const calculateTotalScore = (team: Team, isAway: boolean) => {
  // è¤‡é›‘ãªãƒ­ã‚¸ãƒƒã‚¯
};

// After (hooks/useScoreCalculation.ts)
export const useScoreCalculation = (
  homeTeam: Team,
  awayTeam: Team,
  runEvents: RunEvent[]
) => {
  const calculateTotalScore = useCallback((team: Team, isAway: boolean) => {
    // åŒã˜ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆãƒ†ã‚¹ãƒˆå¯èƒ½ï¼‰
  }, [runEvents]);

  return { calculateTotalScore };
};

// App.tsx
const { calculateTotalScore } = useScoreCalculation(
  homeTeam,
  awayTeam,
  runEvents
);
```

**ã‚¹ãƒ†ãƒƒãƒ—2: ãƒ†ã‚¹ãƒˆã‚’æ›¸ã**

```typescript
// hooks/__tests__/useScoreCalculation.test.ts
import { renderHook } from '@testing-library/react';
import { useScoreCalculation } from '../useScoreCalculation';

describe('useScoreCalculation', () => {
  test('åˆè¨ˆã‚¹ã‚³ã‚¢ã‚’æ­£ã—ãè¨ˆç®—ã™ã‚‹', () => {
    const { result } = renderHook(() =>
      useScoreCalculation(mockHomeTeam, mockAwayTeam, mockRunEvents)
    );

    expect(result.current.calculateTotalScore(mockHomeTeam, false)).toBe(5);
  });
});
```

**ã‚¹ãƒ†ãƒƒãƒ—3: ã‚«ãƒãƒ¬ãƒƒã‚¸ã‚’ç¢ºèª**

```bash
npm test -- --coverage
# useScoreCalculation: 95%é”æˆï¼
```

**ã‚¹ãƒ†ãƒƒãƒ—4: æ¬¡ã®Hookã¸**

```
æˆåŠŸä½“é¨“ã‚’å…ƒã«ã€æ¬¡ã®useGameStateã‚’æŠ½å‡º...
```

---

### å‚è€ƒè³‡æ–™

**ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ‘ã‚¿ãƒ¼ãƒ³**:

- [Clean Architecture in React](https://dev.to/rubemfsv/clean-architecture-applying-with-react-40h6)
- [Repository Pattern](https://martinfowler.com/eaaCatalog/repository.html)
- [Dependency Injection in React](https://javascript.plainenglish.io/dependency-injection-in-react-a6c3d5d0db76)

**ãƒ†ã‚¹ãƒˆæˆ¦ç•¥**:

- [Testing Trophy](https://kentcdodds.com/blog/the-testing-trophy-and-testing-classifications)
- [React Testing Best Practices](https://github.com/goldbergyoni/javascript-testing-best-practices)

**ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°æ‰‹æ³•**:

- [Refactoring by Martin Fowler](https://refactoring.com/)
- [Working Effectively with Legacy Code](https://www.goodreads.com/book/show/44919.Working_Effectively_with_Legacy_Code)

---

### Phase 5ä»¥é™ã®å„ªå…ˆé †ä½åˆ¤æ–­

v3.0 (Phase 1-4)å®Œäº†å¾Œã€ä»¥ä¸‹ã®åŸºæº–ã§åˆ¤æ–­ï¼š

**å³åº§ã«å®Ÿæ–½ã™ã¹ãå ´åˆ**:
- âœ… ãƒãƒ¼ãƒ è¦æ¨¡ãŒæ‹¡å¤§ã™ã‚‹äºˆå®šï¼ˆ3äººä»¥ä¸Šï¼‰
- âœ… æ–°æ©Ÿèƒ½é–‹ç™ºã®é »åº¦ãŒé«˜ã„ï¼ˆé€±1å›ä»¥ä¸Šï¼‰
- âœ… ãƒã‚°ä¿®æ­£æ™‚é–“ãŒé–‹ç™ºæ™‚é–“ã‚’åœ§è¿«ã—ã¦ã„ã‚‹
- âœ… ãƒ¬ã‚¬ã‚·ãƒ¼ã‚³ãƒ¼ãƒ‰ã¸ã®ææ€–ãŒå¼·ã„

**æ§˜å­è¦‹ãŒå¦¥å½“ãªå ´åˆ**:
- âš ï¸ ãƒãƒ¼ãƒ ãŒå°è¦æ¨¡ï¼ˆ1-2äººï¼‰ã§å®‰å®š
- âš ï¸ æ–°æ©Ÿèƒ½é–‹ç™ºã®é »åº¦ãŒä½ã„
- âš ï¸ ç¾çŠ¶ã®ã‚«ãƒãƒ¬ãƒƒã‚¸ï¼ˆ30-60%ï¼‰ã§ååˆ†
- âš ï¸ ä»–ã®å„ªå…ˆåº¦ã®é«˜ã„æ©Ÿèƒ½é–‹ç™ºãŒã‚ã‚‹

**æ¨å¥¨**: v3.0å®Œäº†ã‹ã‚‰**3ãƒ¶æœˆå¾Œ**ã«åŠ¹æœæ¸¬å®šã—ã€Phase 5ã®ç€æ‰‹åˆ¤æ–­ã‚’å®Ÿæ–½

---

## ğŸ“… å¤‰æ›´å±¥æ­´

| ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | æ—¥ä»˜       | å¤‰æ›´å†…å®¹                                                | ä½œæˆè€…       |
| ---------- | ---------- | ------------------------------------------------------- | ------------ |
| 3.0        | 2025-10-06 | åˆç‰ˆä½œæˆï¼šã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚¢ã‚¦ã‚§ã‚¢ãªAppBar + å“è³ªåŸºç›¤å¼·åŒ–   | AI Assistant |
| 3.0.1      | 2025-10-06 | v2.0çµ±åˆãƒ¬ãƒ“ãƒ¥ãƒ¼çµæœã‚’è¿½åŠ ã€Phase 2-4ã‚’æ‹¡å……             | AI Assistant |
| 3.1        | 2025-10-06 | ã‚«ãƒãƒ¬ãƒƒã‚¸å®Ÿæ¸¬å€¤åæ˜ ï¼ˆ4-5%ï¼‰ã€ç›®æ¨™60%ã«èª¿æ•´             | AI Assistant |
| 3.1.1      | 2025-10-06 | ãƒãƒ³ãƒ‰ãƒ«ã‚µã‚¤ã‚ºåˆ¶é™ã‚’1MBã«èª¿æ•´ã€ç¾å®Ÿçš„ãªãƒ†ã‚¹ãƒˆæˆ¦ç•¥è¿½åŠ    | AI Assistant |
| 3.2        | 2025-10-06 | Phase 5ä»¥é™ã®ä¸­é•·æœŸçš„æ§‹é€ æ”¹å–„è¨ˆç”»ã‚’è¿½åŠ ï¼ˆ8é€±é–“ãƒ»70%ç›®æ¨™ï¼‰| AI Assistant |
