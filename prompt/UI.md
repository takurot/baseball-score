# UI構造とデザインシステム

## 1. 全体レイアウト (`MainApp.tsx`)

アプリケーションは Material-UI (MUI) をベースに構築されており、ヘッダー（AppBar）とメインコンテンツ（Container）で構成されています。

### 1.1 ヘッダー (AppBar)
- **ナビゲーション**: ハンバーガーメニュー（試合入力モード時のみ）
  - 新しい試合
  - 試合一覧を表示
  - チーム・選手管理
  - 通算成績
  - ヘルプ
- **タイトル**: 「野球スコア」（画面モードにより「試合一覧」「選手管理」などに変化）
- **アクションボタン** (PC表示):
  - 日付表示・変更
  - 保存ボタン
  - 表示モード切替（編集/一覧）
  - テーマ切替（ライト/ダーク）
  - ヘルプボタン
  - ユーザープロフィール
- **モバイル対応**:
  - 画面幅が狭い場合、アクションボタンの一部は非表示またはアイコン化
  - 日付変更ボタンはAppBarの下部に別枠で表示

### 1.2 メインコンテンツ (Container)
状態に応じて以下の4つの主要画面が切り替わります。

1.  **チーム・選手管理画面** (`TeamList`)
2.  **通算成績画面** (`TeamStatsList`)
3.  **試合一覧画面** (`GameList`)
4.  **試合入力/閲覧画面** (デフォルト)

---

## 2. 試合入力/閲覧画面の構造

この画面がアプリケーションの核となる部分で、スコアブックの入力と閲覧を行います。

### 2.1 基本情報エリア
- **大会名・場所 (`TournamentVenue`)**: テキスト表示、クリックで編集ダイアログ表示。
- **チーム読み込み**: 先攻・後攻それぞれのチームデータを読み込むボタン。
- **ステップナビゲーション**: 「プレー入力」と「試合結果」の2ステップ表示。

### 2.2 スコアボードエリア (`ScoreBoard`)
- **表示内容**: 1回〜7回（少年野球想定）のイニング別得点、合計得点(R)。
- **詳細スコア**: チームごとの合計得点(R)、ヒット数(H)、エラー数(E)を表示。
- **UI特徴**:
  - 現在のイニングをハイライト表示。
  - 画面幅が狭い場合は横スクロール可能。
  - チームごとの行表示（先攻：上段、後攻：下段）。

### 2.3 チーム操作エリア
- **タブ切り替え**: 先攻チームと後攻チームの表示を切り替え。
- **表示モード**: ステップナビゲーションにより「編集モード」と「一覧モード」が切り替わる。

#### A. 編集モード (`activeStep === 0`)
プレーの入力を行うメインのインターフェースです。

1.  **イニング操作パネル**:
    - 現在のイニング表示（例：「1回」）。
    - **アクションボタン**:
        - 得点追加（特殊な得点入力用）
        - アウト追加（特殊なアウト入力用）
    - **イニング移動**: 「前の回」「次の回」ボタン。

2.  **チーム管理・選手リスト (`TeamManager`)**:
    - チーム名表示（編集可能）。
    - **操作ボタン**: チーム選択、選手追加。
    - **選手リスト (`PlayerList`)**:
        - 選手名、背番号、ポジションを表示。
        - 各行をクリックすることで**打席結果登録ダイアログ**を開く。
        - 選手のステータス（出場/控え）切り替え、打順変更、編集・削除が可能。

3.  **打席履歴 (`AtBatHistory`)**:
    - **表示対象**: 現在選択中のイニングのイベントのみ。
    - **内容**:
        - 打席結果（選手名、結果、打点、詳細）。
        - 特殊な得点/アウトイベント。
    - **操作**: 編集アイコン、削除アイコンによる操作が可能。

#### B. 一覧モード (`activeStep === 1` / 共有モード)
試合全体の流れを確認するモードです。

- **打席結果一覧 (`AtBatSummaryTable`)**:
    - 全イニングの打席結果を時系列または打順順に表示（実装詳細によるが、名前から推測）。
    - 共有モード（閲覧専用）ではこの画面がデフォルトとなる。

---

## 3. 主要なダイアログ・フォーム

### 3.1 打席結果登録 (`AtBatForm`)
選手を選択すると表示されるモーダルダイアログ。
- **打席結果**: プルダウン選択。カテゴリ分けされて表示。
  - ヒット系: 緑色アイコン
  - アウト系: グレーまたは赤色アイコン
  - その他: 青色アイコンなど
- **打点**: 0〜4点の選択。
- **詳細メモ**: 自由記述のテキストエリア。
- **更新/登録ボタン**: アクションを実行。

### 3.2 チーム・選手編集
- **選手追加/編集**: 名前、背番号、ポジション、打順を入力。
- **チーム名編集**: チーム名の変更。

### 3.3 試合保存
- **保存オプション**:
  - 上書き保存（既存IDがある場合）
  - 新規保存（「別名で保存」相当）
- **ログイン判定**: 未ログイン時は保存不可（警告表示）。

---

## 4. デザインシステム (`theme`)

### 4.1 カラーパレット
- **Primary**: `#1976d2` (Blue) - メインアクション、強調。
- **Secondary**: `#dc004e` (Pink) - アクセント、キャンセルなど。
- **Background**:
  - Light: Default `#ffffff`, Paper `#ffffff`
  - Dark: Default `#121212`, Paper `#1e1e1e`
- **Result Colors** (カスタム定義):
  - **Hit**: `#4CAF50` (Green)
  - **Out**: `#9E9E9E` (Grey)
  - **Walk**: `#2196F3` (Blue)
  - **Other**: `#607D8B` (Blue Grey)

### 4.2 アクセシビリティ設定
- **フォーカス**: `focus-visible` 時に2pxの太さのアウトラインを表示。
- **タッチターゲット**: モバイル操作を考慮し、最小 `48px x 48px` のタッチ領域を確保。
- **レスポンシブ**:
  - モバイル (`sm` 以下) ではフォントサイズ縮小、パディング調整。
  - テーブルの横スクロール対応。

### 4.3 インタラクション
- **フィードバック**:
  - 保存完了時などに `Snackbar` による通知を表示。
  - 処理実行中は `LoadingButton` や `CircularProgress` を表示。
- **確認**: 削除などの重要な操作には確認ステップ（または慎重なUI配置）が存在。

