# UI改善プラン v5.0：試合入力画面のレイアウト・ビジュアル改善仕様

## 📋 概要

- **作成日**: 2025-11-21  
- **バージョン**: 5.0  
- **ステータス**: 提案中（UIレベルの改善案）  
- **対象画面**: 試合入力/閲覧画面（`MainApp` 内「プレー入力」ステップ）  
- **対象コンポーネント**: `TournamentVenue`, `ScoreBoard`, `TeamManager`, `PlayerList`, `AtBatHistory`, `AtBatSummaryTable` など

---

## 🎯 目的とデザイン方針

1. **情報のグルーピング強化**  
   - 関連する情報・操作をカード/セクション単位でまとめ、ひと目で構造が分かるようにする。
2. **視線の流れの最適化**  
   - 上から「試合概要 → スコアボード → 現在イニング操作 → 選手リスト → イニングの記録」と流れるようにレイアウトする。
3. **ボタンとアクションの優先度明確化**  
   - 「次の回」「保存」など主要アクションを視覚的に強調し、補助操作との区別をつける。
4. **読みやすさ・操作しやすさ向上**  
   - 余白・タイポグラフィ・テーブル整形・Empty State を整理し、初めてのユーザーでも迷わない画面にする。

---

## 🧱 画面レイアウト仕様（セクション構成）

### 1. 全体レイアウト

- **コンテナ**
  - 画面全体は `Container` 内に以下の順に並べる。
  1. 「大会名・場所」エリア（既存 `TournamentVenue`）
  2. 「ステップナビゲーション」（既存）
  3. 「スコアボード」セクション
  4. 「現在イニング操作」セクション
  5. 「選手一覧」セクション
  6. 「◯回の記録」セクション
- **セクション表現**
  - 各セクションは `Paper` もしくは `Card` で囲み、タイトルと内容部分を明確に分ける。
  - セクション間のマージン: `mt: 3〜4` 相当（例: `theme.spacing(3)`）。
  - セクション内部の要素間マージン: `mt: 1〜2`。

### 2. セクションタイトル仕様

- タイトルは `Typography variant="subtitle1"`、`fontWeight: 600` を基本とする。
- 例:
  - 「スコアボード」
  - 「1回の操作」（現在イニングに応じて動的変更）
  - 「出場中の選手」
  - 「1回の記録」

---

## 📊 スコアボード（`ScoreBoard`）UI仕様

### 1. 基本構造

- セクションタイトル: 「スコアボード」
- 右上に `R / H / E` ラベル付きのサマリを配置（`Stack` で横並び）。
- スコアテーブルは以下を満たすこと。
  - ヘッダー行: イニング番号 + 合計列 (`R`)。
  - 行: 先攻チーム（上）、後攻チーム（下）。

### 2. ビジュアル仕様

- **ヘッダー行**
  - 背景色: `theme.palette.action.hover`
  - テキスト: 太字 (`fontWeight: 600`)
  - 数値セルは右寄せ (`textAlign: "right"`)。
- **行のストライプ**
  - 奇数行/偶数行で背景色をわずかに変える（例: `theme.palette.action.selected` を 4〜8% alpha）。
- **現在イニングのハイライト**
  - 対象列のセルに以下を適用:
    - 太枠の左・右ボーダー（例: `borderColor: theme.palette.primary.main`, `borderWidth: 2px`）
    - 背景色をわずかに `primary` 系でトーンアップ
    - 数値を太字
- **レスポンシブ**
  - モバイル幅ではテーブル全体を `overflowX: "auto"` で横スクロール可能に。
  - テーブル右端に淡いグラデーションを敷き、スクロール可能であることを示す。

---

## 🔁 現在イニング操作パネル仕様

### 1. レイアウト

- セクションタイトル: 「◯回の操作」（現在イニングを表示）。
- タイトル直下にツールバー風の `Paper` を配置し、以下を横一列に並べる。
  1. 左寄せ: 「◯回」ラベル（`Typography variant="subtitle1"`）
  2. 右寄せ: 「前の回」「次の回」ボタン

### 2. ボタン仕様（イニング移動）

- **次の回**
  - `variant="contained"`, `color="primary"`
  - 主要アクションとして視覚的に強調。
- **前の回**
  - `variant="outlined"`, `color="primary"`
  - 1回表など、遷移できない状態では `disabled`。

### 3. 特殊アクションボタン

- 「得点追加」「アウト追加」を同じセクション内で横並びに配置。
- ボタン仕様:
  - どちらか（頻度が高い方）を `contained`、もう一方を `outlined` とし役割差を出す。
  - ラベルは短く、アイコン（得点: `AddCircleOutline`, アウト: `HighlightOff` 等）を付与。
- モバイル幅 (`sm` 以下):
  - ボタンを縦並び（`direction="column"`）+ `fullWidth` にし、タップしやすさを確保。

---

## 👥 選手一覧セクション（`TeamManager` / `PlayerList`）仕様

### 1. セクション構造

- タイトル: 「選手一覧」
- サブタイトル（小さめのテキスト）で「出場中の選手」を明示。
- 右上に操作ボタンを配置:
  - 左: 「チームを選択」 (`variant="outlined"`, `startIcon` にチームアイコン)
  - 右: 「選手を追加」 (`variant="contained"`, `color="primary"`)

### 2. テーブル整形

- カラム構成（例）:
  - 打順（中央寄せ）
  - 背番号（中央寄せ）
  - 名前（左寄せ）
  - ポジション（中央寄せ、略号）
  - アクション（右端、アイコンボタン群）
- 行ホバー:
  - `hover` 時に背景色を `action.hover` に変更。
  - 行クリックで打席登録ダイアログが開く場合、`cursor: "pointer"` を付与。
- 選択行:
  - 現在操作対象の選手がある場合、その行に `selected` 状態スタイルを適用。

---

## 📝 「◯回の記録」セクション（`AtBatHistory`）仕様

- セクションタイトル: 「◯回の記録」（現在イニングを反映）。
- 内容:
  - 記録がある場合: 既存の一覧表示（打席結果、詳細など）。
  - 記録がない場合（Empty State）: 下記仕様に従う。

### Empty State仕様（共通）

- レイアウト:
  - セクション内中央揃え、上下左右に十分な余白（`py: 4`, `px: 2` 程度）。
- 表示内容:
  - アイコン: 例 `InsertDriveFileOutlined` / `GroupOutlined`
  - メインテキスト: 「まだ記録がありません」
  - サブテキスト: 「『選手を追加』してから打席を登録してください」のように次のアクションを明示。
- トーン:
  - グレー系テキスト (`text.secondary`) を使用し、エラーではなく情報であることを示す。

同じ Empty State パターンを「出場中の選手がいません」の状態にも適用する。

---

## 🎨 ボタン・カラー・タイポグラフィの一貫性ルール

### 1. ボタンの優先度と色

- **Primary（最重要）**
  - 例: 「保存」「次の回」「決定系アクション」
  - `variant="contained"`, `color="primary"`
- **Secondary/危険操作**
  - 例: 「削除」「破棄」
  - `color="secondary"` または `color="error"`, `variant="contained"` or `outlined`
- **補助アクション**
  - 例: 「前の回」「編集」「キャンセル」
  - `variant="outlined"` または `text`, `color="primary"` or `inherit`

### 2. タイポグラフィ階層

- 画面タイトル（AppBar内）: `h6`
- セクションタイトル: `subtitle1`（太字）
- カード内補助見出し: `subtitle2`
- 説明文・サブテキスト: `body2`

---

## 📱 モバイル最適化仕様

1. **ボタンレイアウト**
   - 主要アクションボタンは `fullWidth` を基本とし、上下に積み上げる。
   - ボタン間マージンは `theme.spacing(1〜2)`。
2. **テーブルスクロール**
   - スコアボードおよび選手テーブルは `minWidth` を保ちつつ、`overflowX: "auto"`。
   - スクロールヒントとして右端にグラデーション＋アイコンをオプションで表示。
3. **タッチターゲット**
   - アイコンボタン・行クリック領域など、主要操作は高さ `48px` 以上を確保。

---

## ✅ 受け入れ条件（Acceptance Criteria）

- [ ] 画面を見たときに、上から「試合概要 → スコアボード → 現在イニング操作 → 選手一覧 → 記録」の順でセクションが明確に区切られていること。
- [ ] 現在イニングの列がスコアボード上で一目で分かる（背景色 + 太枠 +太字）こと。
- [ ] 「次の回」ボタンが「前の回」より視覚的に強く、1回表では「前の回」が `disabled` 表示になること。
- [ ] 「チームを選択」「選手を追加」などの主要ボタンがセクション右上に整理され、Primary/Secondary の色ルールに従っていること。
- [ ] 「出場中の選手がいません」「まだ記録がありません」状態で、Empty State コンポーネントが表示され、次のアクションが文言で示されていること。
- [ ] モバイル幅で、主要ボタンが縦積みフル幅でタップしやすくなっていること。
- [ ] 既存機能（打席入力・イニング移動・保存など）の動作に影響がないこと（既存テストが全てパスすること）。

---

## ⏱ 優先度と実装ステップ（簡易）

1. **Phase 1（すぐやる）**
   - セクションカード化とタイトル追加
   - スコアボードのヘッダー/現在イニングハイライト
2. **Phase 2**
   - 現在イニング操作パネルのツールバー化
   - ボタン優先度・色ルールの適用（対象コンポーネント: `ScoreBoard`, `TeamManager`, `AtBatHistory`）
3. **Phase 3**
   - テーブル整形（カラム寄せ・ホバー/選択状態）
   - Empty State コンポーネント共通化と適用
4. **Phase 4**
   - モバイル最適化（ボタン縦並び・スクロールヒント）

各 Phase は個別にリリース可能であり、UI の段階的改善を前提とする。


